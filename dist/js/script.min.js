"use strict";var screenHeight;function initScreen(){screenHeight=$(".c-slide--active").height(),$(".s-site").height(screenHeight),slideButtons(),updateStats(),updateVersion(),buildTable(),buttonJet(),buttonDays(),popupPlayerName()}function buttonRestart(){$("[data-game-restart]").on("tap",function(){window.location.reload(!0)})}function buttonModal(){$("[data-modal-close]").on("tap",function(){$(this).closest(".c-modal").fadeOut(200,function(){$(this).remove()})})}function buttonJet(){$("[data-button-jet]").on("tap",function(){$(this).hasClass("button--disabled")||updateDay()})}function buttonDays(){$("[data-game-length]").on("tap",function(){$(this).removeClass("button--deselect"),$("[data-game-length]").not($(this)).addClass("button--deselect");var e=$(this).attr("data-game-length");player.invMax=7<e?100:50,player.dayMax=e,updateStats(),$("[data-slide-button]").removeClass("button--disabled")})}function toggleSignIn(){if(firebase.auth().currentUser)firebase.auth().signOut();else{var e=document.getElementById("email").value,t=document.getElementById("password").value;if(e.length<7)return void alert("Please enter an email address.");if(t.length<6)return void alert("Please enter a longer password.");firebase.auth().signInWithEmailAndPassword(e,t).catch(function(e){var t=e.code,a=e.message;"auth/wrong-password"===t?alert("Wrong password."):alert(a),console.log(e),document.getElementById("quickstart-sign-in").disabled=!1})}document.getElementById("quickstart-sign-in").disabled=!0}function handleSignUp(){var e=document.getElementById("email").value,t=document.getElementById("password").value;e.length<4?alert("Please enter an email address."):t.length<4?alert("Please enter a password."):firebase.auth().createUserWithEmailAndPassword(e,t).catch(function(e){var t=e.code,a=e.message;"auth/weak-password"==t?alert("The password is too weak."):alert(a),console.log(e)})}function sendEmailVerification(){firebase.auth().currentUser.sendEmailVerification().then(function(){alert("Email Verification Sent!")})}function sendPasswordReset(){var e=document.getElementById("email").value;firebase.auth().sendPasswordResetEmail(e).then(function(){alert("Password Reset Email Sent!")}).catch(function(e){var t=e.code,a=e.message;"auth/invalid-email"==t?alert(a):"auth/user-not-found"==t&&alert(a),console.log(e)})}function initApp(){firebase.auth().onAuthStateChanged(function(e){if(document.getElementById("quickstart-verify-email").disabled=!0,e){e.displayName,e.email;var t=e.emailVerified;e.photoURL,e.isAnonymous,e.uid,e.providerData;document.getElementById("quickstart-sign-in-status").textContent="Signed in",document.getElementById("quickstart-sign-in").textContent="Sign out",document.getElementById("quickstart-account-details").textContent=JSON.stringify(e,null,"  "),t||(document.getElementById("quickstart-verify-email").disabled=!1),$("[data-logged-out]").hide(),$("[data-popup-register]").removeClass("active")}else document.getElementById("quickstart-sign-in-status").textContent="Signed out",document.getElementById("quickstart-sign-in").textContent="Sign in",document.getElementById("quickstart-account-details").textContent="null",$("[data-logged-out]").show();document.getElementById("quickstart-sign-in").disabled=!1}),document.getElementById("quickstart-sign-in").addEventListener("click",toggleSignIn,!1),document.getElementById("quickstart-sign-up").addEventListener("click",handleSignUp,!1),document.getElementById("quickstart-verify-email").addEventListener("click",sendEmailVerification,!1),document.getElementById("quickstart-password-reset").addEventListener("click",sendPasswordReset,!1)}function addUserName(e){firebase.auth().currentUser.updateProfile({displayName:e}).then(function(){}).catch(function(e){})}function initFirestore(){var e=$("[data-game-start]");$("[data-game-end]"),$("[data-game-end]"),$("[data-game-end]");e.on("tap",function(){updateScore("gamesPlayed",1)})}function updateScore(a,n){var o,e=firebase.auth().currentUser.uid,t=readCookie("playerName"),i=firebase.firestore(),d=i.collection("players").doc(e);(d=i.doc("players/"+e)).update({uid:e,arcadeName:t}),d.get().then(function(e){if(e.exists){console.log(e.data()[a]),o=void 0===e.data()[a]?(console.log("property not found"),1):(console.log("added "+n+" to "+a),e.data()[a]+n);var t={};t[a]=o,d.update(t)}else console.log("No such document!")}).catch(function(e){console.log("Error getting document:",e)})}$(window).load(function(){initScreen()}),window.onload=function(){initApp()},window.onload=function(){initFirestore()};var config={apiKey:"AIzaSyD3KptP-Zcb7wDW_f1QjXfd5vzKyPhiovs",authDomain:"dopewars-go.firebaseapp.com",databaseURL:"https://dopewars-go.firebaseio.com",projectId:"dopewars-go",storageBucket:"dopewars-go.appspot.com",messagingSenderId:"532369668543"};function initApp(){firebase.auth().onAuthStateChanged(function(e){if(document.getElementById("quickstart-verify-email").disabled=!0,e){e.displayName,e.email;var t=e.emailVerified;e.photoURL,e.isAnonymous,e.uid,e.providerData;document.getElementById("quickstart-sign-in-status").textContent="Signed in",document.getElementById("quickstart-sign-in").textContent="Sign out",document.getElementById("quickstart-account-details").textContent=JSON.stringify(e,null,"  "),t||(document.getElementById("quickstart-verify-email").disabled=!1),$("[data-logged-out]").hide(),$("[data-popup-register]").removeClass("active")}else document.getElementById("quickstart-sign-in-status").textContent="Signed out",document.getElementById("quickstart-sign-in").textContent="Sign in",document.getElementById("quickstart-account-details").textContent="null",$("[data-logged-out]").show();document.getElementById("quickstart-sign-in").disabled=!1}),document.getElementById("quickstart-sign-in").addEventListener("click",toggleSignIn,!1),document.getElementById("quickstart-sign-up").addEventListener("click",handleSignUp,!1),document.getElementById("quickstart-verify-email").addEventListener("click",sendEmailVerification,!1),document.getElementById("quickstart-password-reset").addEventListener("click",sendPasswordReset,!1),initFirestore()}function buildTable(){dopelist.forEach(function(e){$("[data-dope-table-content]").append('            <tr data-dope="'+e.name+'">                <td>'+e.name+"</td>                <td data-dope-amount>"+e.amount+'</td>                <td data-dope-sell><button class="button button--trade button--sell"></button></td>                <td data-dope-price></td>                <td data-dope-buy><button class="button button--trade button--buy"></button></td>            </tr>        ')}),buttonTradeInit()}function buttonTradeInit(){$.event.special.tap.tapholdThreshold=400,$(".button--trade").on("tap",function(){buttonTrade($(this),"tap")}).on("taphold",function(){buttonTrade($(this),"taphold")}),setRandomPrices()}function buttonTrade(e,t){if(!e.hasClass("button--disabled")){var a,n=e.closest("tr"),o=n.attr("data-dope"),i=parseInt(n.find("[data-dope-price]").html());a="tap"===t?e.hasClass("button--buy")?1:-1:e.hasClass("button--buy")?Math.floor(player.cash/i):-1*n.find("[data-dope-amount]").html();var d=player.invCurr,s=player.invMax-d;s<a&&(a=s),player.cash-=i*a,updateStats(),updateDopeAmount(o,a)}}function slideButtons(){$("[data-slide-target]").each(function(){$(this).on("tap",function(){console.log("tapped"),$(".c-slide").removeClass("c-slide--remove");var e=$(this).attr("data-slide-target");$("[data-slide__"+e+"]").addClass("c-slide--active"),$(this).closest(".c-slide").removeClass("c-slide--active").addClass("c-slide--remove"),$(".s-site__masthead").addClass("lowered")})})}function removeSlide(e){e.removeClass("c-slide--active").addClass("c-slide--remove")}function disableButtons(){dopelist.forEach(function(e){var t=$('[data-dope="'+e.name+'"]'),a=parseInt(t.find("[data-dope-amount]").html()),n=t.find("[data-dope-sell]").find(".button--trade");a<=0?n.addClass("button--disabled"):n.removeClass("button--disabled");var o=parseInt(t.find("[data-dope-price]").html()),i=t.find("[data-dope-buy]").find(".button--trade");o>player.cash?i.addClass("button--disabled"):i.removeClass("button--disabled");var d=$("[data-inv-curr]").html();$("[data-inv-max]").html()-d<=0&&i.addClass("button--disabled")})}function updateDopeAmount(e,t){for(var a in dopelist)dopelist[a].name==e&&(dopelist[a].amount+=t,$('[data-dope="'+e+'"]').find("[data-dope-amount]").html(dopelist[a].amount));player.invCurr+=t,updateStats(),disableButtons()}function setRandomPrices(){dopelist.forEach(function(e){updateDopePrice(e,1)})}function updateDopePrice(e,t){var a=e.priceCurr(t),n=$('[data-dope="'+e.name+'"]').find("[data-dope-price]");n.html(a),a<e.priceMin?a=e.priceMin:a>e.priceMax&&(a=e.priceMax);var o=(a-e.priceMin)/(e.priceMax-e.priceMin),i="rgb(255,255,255)";if(.5<o){var d=Math.floor(255-510*(o-.5));i="rgb(255,"+d+","+d+")"}else{var s=Math.floor(255-510*(.5-o));i="rgb("+s+",255,"+s+")"}n.css("color",i),disableButtons()}function updateDay(){(setRandomPrices(),player.dayCurr>=player.dayMax)?(dopelist.forEach(function(e){var t=$('[data-dope="'+e.name+'"]'),a=parseInt(t.find("[data-dope-amount]").html());if(0<a){var n=parseInt(t.find("[data-dope-price]").html());player.cash+=n*a}}),updateStats(),removeSlide($(this).closest(".c-slide")),createModal("            <h2>Doperun over!</h2>            <p>What a run! Your final score is "+digits(player.cash)+'</p>            <div class="c-button-group">                <div class="button" data-game-restart data-game-end data-game-won>Again!</div>            </div>        '),buttonRestart()):(player.dayCurr+=1,updateStats(),randomEvents())}function dopeFound(){var e,t=randomDope(dopelist).name,a=Math.floor(5*Math.random())+1,n=Math.random();(e=.33<n?"You find "+a+" "+t+" on the subway.":.66<n?"An old friend drops by and he gives you "+a+" "+t+".":"In the back of your pocket you find "+a+" "+t+"!","Cocaine"!=t&&"Heroin"!=t)&&(createModal("            <h2>Free Dope!</h2>            <p>"+e+'</p>            <div class="button" data-modal-close>Score!</div>        '),updateDopeAmount(t,a))}function dopeHigh(){var e=randomDope(dopelist);createModal("        <h2>Drug Bust!</h2>        <p>"+randomFrom(["Addicts are buying "+e.name+" for ridiculous prices!","Cops made a big "+e.name+" bust! Prices are outrageous!","The police raided a big "+e.name+" warehouse. Prices have skyrocketed!"])+'</p>        <div class="button" data-modal-close>Alright</div>    '),updateDopePrice(e,2)}function dopeLow(){var e=randomDope(dopelist),t="        <h2>Market flooded!</h2>        <p>"+("Hashish"===e?"The Marrakesh Express has arrived!":"Rival gangs raided some pharmacies and cheap "+e.name+" has flooded the market")+'</p>        <div class="button" data-modal-close>Cool</div>    ';dopelist.filter(function(e){return dopelist.name===e});createModal(t),updateDopePrice(e,.1)}function findCoat(){player.invMax+=10,updateStats(),createModal('        <h2>Trench coat</h2>        <p>You find an awesome trenchcoat with extra pockets!</p>        <div class="c-button-group">            <div class="button" data-modal-close>Stylish!</div>        </div>    ')}function findGun(){if(100<=player.cash)var e='            <h2>Carrying</h2>            <p>Do you want to buy a gun for $100?</p>            <div class="c-button-group c-gun__controls">                <div class="button button--inline" data-gun-buy>Yeah!</div>                <div class="button button--inline" data-modal-close>Nah</div>            </div>        ';else e='            <h2>Low on cash</h2>            <p>Someone offers to sell you a bigger gun for $100 but you are broke!</p>            <div class="c-gun__controls">                <div class="button" data-modal-close>Bummer!</div>            </div>        ';createModal(e),$("[data-gun-buy]").on("tap",function(){player.cash-=100,player.invCurr+=5,player.gun+=1,updateStats(),$(this).closest(".c-modal").fadeOut(200,function(){$(this).remove()})})}function officerHardass(){var o=Object.create({health:100,loot:50,damage:10,winChance:50,escapeChance:30,biteChance:70,dropChance:50,bribeCost:500});createModal('        <h2>The pigs!</h2>        <p class="c-combat__result">Officer Hardass and his deputies are chasing you! What do you do?</p>        <div class="s-row c-combat">            <div class="s-row__column s-row__column--half">                Hardass: <div class="c-health c-health--enemy"><span>'+o.health+'</span></div>            </div>            <div class="s-row__column s-row__column--half">                You: <div class="c-health c-health--player"><span>'+player.health+'</span></div>            </div>        </div>        <div class="c-button-group c-combat__controls">            <div class="button button--inline" data-combat-run>Run</div>            <div class="button button--inline" data-combat-fight>Fight</div>            <div class="button button--inline" data-combat-bribe>Bribe</div>        </div>    '),$(".c-health--player span").html(player.health).css("width",player.health+"%"),$("[data-combat-bribe]").on("tap",function(){var e,t=Math.ceil(o.bribeCost*Math.random())+o.bribeCost;player.cash<t?(e="Maybe you should save some cash first, dipshit...",$("[data-combat-bribe]").hide()):e="Ill see it through the fingers this time.<br />But its gonna cost ya $"+t+".",$(".c-combat__result").html(e),$("[data-combat-bribe]").html("pay").on("tap",function(){player.cash-=t,updateStats(),$(this).closest(".c-modal").fadeOut(200,function(){$(this).remove()})})}),$("[data-combat-run]").on("tap",function(){var e;if(o.escapeChance>=100*Math.random())$(".c-combat__controls").hide(),e="You got away!",$(".c-combat").after('<div class="button" data-modal-close>Too close</div>'),buttonModal();else{var t=Math.ceil(4*Math.random());if(o.biteChance>=100*Math.random()){var a=Math.ceil(o.damage*Math.random())+2;e="Police dogs chase your for "+t+" blocks<br />You were bit for "+a+" damage!",player.health-=a,player.health<=0&&(player.health=0,$(".c-combat__controls").hide(),e="Police dogs grab you and you bleed out on the streets. Your final score is: "+digits(player.cash),$(".c-combat").after('<div class="button" data-game-restart data-game-end data-game-lost>Nasty</div>'),buttonRestart()),$(".c-health--player span").html(player.health).css("width",player.health+"%")}else e="Police dogs chase your for "+t+" blocks"}$(".c-combat__result").html(e)}),$("[data-combat-fight]").on("tap",function(){var e;if(o.winChance>=100*Math.random()){e="You shot officer Hardass!";var t=Math.ceil(player.damage*Math.random())*(player.gun+1)+player.damage;if(o.health-=t,o.health<=0){o.health=0,$(".c-combat__controls").hide();var a=Math.ceil(o.loot*Math.random())+o.loot;e="Officer Hardass drops dead!<br />On his body you find $"+a+".",player.cash+=a,updateStats(),$(".c-combat").after('<div class="button" data-modal-close>Later Hardass</div>'),buttonModal()}$(".c-health--enemy span").html(o.health).css("width",o.health+"%")}else{e="Officer Hardass takes a shot at you.";var n=Math.ceil(o.damage*Math.random())+o.damage;player.health-=n,player.health<=0&&(player.health=0,$(".c-combat__controls").hide(),e="Officer Hardass shot you dead sucker!<br />Your final score is: "+digits(player.cash),$(".c-combat").after('<div class="button" data-game-restart data-game-end data-game-lost>Ah man!</div>'),buttonRestart()),$(".c-health--player span").html(player.health).css("width",player.health+"%")}$(".c-combat__result").html(e)})}function oldLady(){alert("oldLady")}function pennyFound(){var e=Math.floor(100*Math.random())+1,t=Math.random();createModal("        <h2>Free monies!</h2>        <p>"+(.33<t?"Someone left some cash in an alley, you find $"+e+".":.66<t?"Your auntie May died and she left you $"+e+" inheritance.":"The cashier made a mistake on your change, you keep $"+e+" extra.")+'</p>        <div class="button" data-modal-close>Rad!</div>    '),player.cash+=e,updateStats()}function randomQuote(){var e=randomFrom(["I was raised a Christian and turned into a stone-faced acid head","I am more dope than heroin, sharper than a needle","I tried marijuana once. I did not inhale","Who are the Warriors?","I am not a demon. I am a lizard, a shark, a heat-seeking panther","The only dope worth shooting is Richard Nixon","I have never been to New Zealand before. But Xena, the warrior princess, comes from there"]);createModal("        <h2>A new day</h2>        <p>"+randomFrom(['A homeless bum rubs against you and slurrs: "'+e+'".','An old lady on the subway sings softly: "'+e+'".','"'+e+'" you hear someone shout on the streets.','This hipcat swings by and says "'+e+'".','"'+e+'" a local newspaper reads.',"All is quiet on the streets.","You hear a song from Bob Dylan drifting from an open second floor window.","Nothing much happens."])+'</p>        <div class="button" data-modal-close>Lets deal</div>    ')}function buildTable(){dopelist.forEach(function(e){$("[data-dope-table-content]").append('            <tr data-dope="'+e.name+'">                <td>'+e.name+"</td>                <td data-dope-amount>"+e.amount+'</td>                <td data-dope-sell><button class="button button--trade button--sell"></button></td>                <td data-dope-price></td>                <td data-dope-buy><button class="button button--trade button--buy"></button></td>            </tr>        ')}),buttonTradeInit()}function slideButtons(){$("[data-slide-target]").each(function(){$(this).on("tap",function(){$(".c-slide").removeClass("c-slide--remove");var e=$(this).attr("data-slide-target");$("[data-slide__"+e+"]").addClass("c-slide--active"),$(this).closest(".c-slide").removeClass("c-slide--active").addClass("c-slide--remove"),$(".s-site__masthead").addClass("lowered")})})}function removeSlide(e){e.removeClass("c-slide--active").addClass("c-slide--remove")}function updateStats(){$("[data-day-curr]").html(player.dayCurr),$("[data-day-max]").html(player.dayMax),$("[data-cash]").find("span").html(digits(player.cash)),$("[data-inv-curr]").html(player.invCurr),$("[data-inv-max]").html(player.invMax)}function createModal(e){$("body").append('        <div class="c-modal">            <div class="c-modal__content">                '+e+"            </div>        </div>    ").fadeIn(200),buttonModal()}firebase.initializeApp(config),window.onload=function(){initApp()},$("[data-popup]").on("tap",function(){var e=$(this).attr("data-popup");$("["+e+" ]").toggleClass("active")}),$("[data-toggle]").on("click",function(){var e=$(this).attr("data-toggle");$("."+e).toggleClass("active").slideToggle()});var theme=new Audio;theme.src="../dist/audio/dopewars-theme-v1.mp3",$("[data-audio-toggle]").on("click",function(){theme.paused?(theme.play(),$(this).addClass("playing")):(theme.pause(),$(this).removeClass("playing"))});var dopelist=[];function Dope(e,o,i,t){this.name=e,this.priceMin=o,this.priceMax=i,this.amount=t,this.priceCurr=function(e){var t,a;e<1?(t=o/2,a=1.5*o):1===e?(t=o,a=i):1<e&&(t=i-o,a=i+o);var n=Math.random();return this.random=n,Math.floor((a-t+1)*n+t)},dopelist.push(this)}var dope1=new Dope("Acid",1e3,4400,0),dope2=new Dope("Cocaine",15e3,29e3,0),dope3=new Dope("Hashish",480,1280,0),dope4=new Dope("Heroin",5500,13e3,0),dope5=new Dope("Ludes",11,60,0),dope6=new Dope("MDA",1500,4400,0),dope7=new Dope("Opium",540,1250,0),dope8=new Dope("PCP",1e3,2500,0),dope9=new Dope("Peyote",220,700,0),dope10=new Dope("Shrooms",630,1300,0),dope11=new Dope("Speed",90,250,0),dope12=new Dope("Weed",315,890,0);function createCookie(e,t){if("localStorage"in window&&null!==window.localStorage)localStorage.setItem(e,t);else{var a=new Date;a.setTime(a.getTime()+31104e6);var n="; expires="+a.toGMTString();document.cookie=e+"="+t+n+"; path=/"}}function clearCookie(e,t){if("localStorage"in window&&null!==window.localStorage)localStorage.setItem(e,null);else{document.cookie=e+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/"}}function readCookie(e){var t=null;if("localStorage"in window&&null!==window.localStorage)t=localStorage.getItem(e);else for(var a=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1,i.length);0==i.indexOf(a)&&(t=i.substring(a.length,i.length))}if(null!==t){if("true"==t.toLowerCase())return!0;if("false"==t.toLowerCase())return!1}return t}var PlayerConstruct={health:100,cash:2e3,invCurr:0,invMax:50,damage:20,gun:0,dayCurr:1,dayMax:7},player=Object.create(PlayerConstruct),eventList=[],eventRNG=Math.random(),randomChanceTrigger=1;function Event(e,t){this.name=e,this.chance=t,eventList.push(this)}var event1=new Event("oldLady",0),event2=new Event("officerHardass",10),event3=new Event("dopeLow",5),event4=new Event("dopeHigh",20),event5=new Event("dopeFound",5),event6=new Event("pennyFound",20),event7=new Event("findCoat",5),event8=new Event("findGun",5),event9=new Event("randomQuote",40);function getEventChange(e,t){return e.chance*(100/t)}function getRandomEvent(e){for(var t=0;t<e.length;t++)if(e[t].chance>=100*eventRNG)return eventRNG=Math.random(),e[t]}var eventTotal=0;eventList.forEach(function(e){eventTotal+=e.chance});var eventMap=[],range=0;function randomEvents(){var e=Math.random();if(1-randomChanceTrigger<=e){var t=getRandomEvent(eventMap);window[t.name]()}}eventList.forEach(function(e){range+=getEventChange(e,eventTotal),eventMap.push(new Event(e.name,range))});var VersionConstruct={number:"1.0.8",name:"gamesPlayed",quote:"Work hard, Play hard",date:"16 nov 2017"},Version=Object.create(VersionConstruct);function updateVersion(){$("[data-version-quote]").html(Version.quote),$("[data-version-number]").html(Version.number+" - "+Version.name)}function popupPlayerName(){null===readCookie("playerName")&&playerNameSelect()}function playerNameSelect(){$(".c-popup").hide(),$(".c-playerLetter").off(),$("[data-popup-playerName]").addClass("active").show();var a=$("[data-tag]").find(".c-playerInitial");a.first().addClass("active"),$(".c-playerLetter").on("tap",function(){var e=$(this).html(),t=$(".c-playerInitial.active").removeClass("active").html(e).next();t.length?t.addClass("active"):(a.removeClass("active"),$("[data-button-saveName]").removeClass("button--disabled").on("tap",function(){var e="";$(this).html("preinitial"),a.each(function(){e+=$(this).html()}),createCookie("playerName",e),addUserName(e),$(this).html(e),$("[data-popup-playerName]").fadeOut(200)}))}),$(".c-playerInitial").on("tap",function(){$(".c-playerInitial").removeClass("active"),$(this).addClass("active")})}function popupRegister(){}function digits(e,t,a,n){if(null==e||!isFinite(e))throw new TypeError("number is not valid");if(!t){var o=e.toString().split(".").length;t=1<o?o:0}a||(a=","),n||(n=".");var i=(e=(e=parseFloat(e).toFixed(t)).replace(".",a)).split(a);return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,n),e="$"+i.join(a)}$("[data-changename]").on("tap",function(){$(".c-mainmenu").hide(),playerNameSelect()});var x=$(".geolocation");function getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition,showError):x.innerHTML="Geolocation is not supported by this browser."}function showPosition(e){x.innerHTML="Latitude: "+e.coords.latitude+"<br />Longitude: "+e.coords.longitude}function showError(e){switch(e.code){case e.PERMISSION_DENIED:x.innerHTML="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:x.innerHTML="Location information is unavailable.";break;case e.TIMEOUT:x.innerHTML="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:x.innerHTML="An unknown error occurred."}}document.addEventListener("touchmove",function(e){1!==e.scale&&e.preventDefault()},!1);var lastTouchEnd=0;function randomFrom(e){return e[Math.floor(Math.random()*e.length)]}function dopeArray(e){this.name=e}document.addEventListener("touchend",function(e){var t=(new Date).getTime();t-lastTouchEnd<=300&&e.preventDefault(),lastTouchEnd=t},!1);var dopeMap=[];dopelist.forEach(function(e){dopeMap.push(new dopeArray(e.name))});var randomDope=function(e){var t=Object.keys(e);return e[t[t.length*Math.random()<<0]]};function popupPlayerName(){null===readCookie("playerName")&&playerNameSelect()}function playerNameSelect(){$("[data-popup-playerName]").addClass("active").show();var a=$("[data-tag]").find(".c-playerInitial");a.first().addClass("active"),$(".c-playerLetter").off(),$(".c-playerLetter").on("tap",function(){var e=$(this).html(),t=$(".c-playerInitial.active").removeClass("active").html(e).next();t.length?t.addClass("active"):(a.removeClass("active"),$("[data-button-saveName]").removeClass("button--disabled").on("tap",function(){var e="";$(this).html("preinitial"),a.each(function(){e+=$(this).html()}),createCookie("playerName",e),$(this).html(e),$("[data-popup-playerName]").fadeOut(200)}))}),$(".c-playerInitial").on("tap",function(){$(".c-playerInitial").removeClass("active"),$(this).addClass("active")})}$("[data-changename]").on("tap",function(){$(".c-mainmenu").hide(),playerNameSelect()});